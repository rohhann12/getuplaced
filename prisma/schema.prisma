generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Founder {
  id          String               @id @default(uuid())
  email       String               @unique
  companyName String               @unique
  ctoName     String               @unique
  domain      String?
  users       User[]
  userStatuses UserFounderStatus[] @relation("FounderToStatus")
}

model User {
  id               String               @id @default(uuid())
  name             String
  email            String               @unique
  hits             Int?                 @default(2)
  founderId        String?
  gmailAppPassword String?              @unique
  referalCode      Int?                 @unique
  founder          Founder?             @relation(fields: [founderId], references: [id])
  template         template[]
  userStatuses     UserFounderStatus[]  @relation("UserToStatus")
  sentEmail        Int                  @default(0)
}

model template {
  id        String   @id @default(uuid())
  template  String?
  subject   String?
  userId    String
  user      User     @relation(fields: [userId], references: [id])
}

model UserFounderStatus {
  id         String   @id @default(uuid())
  userId     String
  founderId  String
  isSent     Boolean  @default(false)

  user       User     @relation("UserToStatus", fields: [userId], references: [id])
  founder    Founder  @relation("FounderToStatus", fields: [founderId], references: [id])

  @@unique([userId, founderId])  
  @@map("sent")                  
}
